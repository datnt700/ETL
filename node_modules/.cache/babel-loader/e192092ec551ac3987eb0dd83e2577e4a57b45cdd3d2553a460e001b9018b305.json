{"ast":null,"code":"// import { React, useRef, useState, useEffect } from 'react';\n// import '../asset/health.scss';\n// import * as d3 from 'd3';\n// import BarChart from './BarChart';\n// function Health({ catID, data, mag, annee }) {\n//   const [nombreFab, setNombreFab] = useState(0);\n//   const [nombreProd, setNombreProd] = useState(0);\n//   const [nombreMag, setNombreMag] = useState(0);\n//   const [moyenneProduit, setMoyenneProduit] = useState(0);\n//   const [topFab, setTopFab] = useState([]);\n//   const svgRef = useRef(null);\n//   const fabData = [];\n//   const prodData = [];\n//   const magData = [];\n//   const prodByFab = [];\n\n//   const dateString = [\n//     'Janvier 2022',\n//     'Février 2022',\n//     'Mars 2022',\n//     'Avril 2022',\n//     'Mai 2022',\n//     'Juin 2022',\n//     'Juillet 2022',\n//     'Août 2022',\n//     'Septembre 2022',\n//     'Octobre 2022',\n//     'Novembre 2022',\n//     'Decembre 2022',\n//     'Janvier 2023',\n//   ];\n//   const optionTabs = ['Statistiques', 'Top 10 magasins', 'Moyenne de produit'];\n//   const currentTab = 'Statistiques';\n\n//   useEffect(() => {\n//     handleData(5);\n//   }, []);\n\n//   const handleData = (category) => {\n//     let topMagasin = [];\n//     let topMagasinByFab = [];\n//     let topMagasinByProd = [];\n\n//     data.forEach((item) => {\n//       if (Number(item.catID) === category) {\n//         if (!fabData.includes(item.fabID)) {\n//           // Questin 1.1\n//           fabData.push(item.fabID);\n//         } else {\n//           // • Question 1.2.\n//           if (!prodByFab.includes(item.prodID)) {\n//             prodByFab.push(item.prodID);\n//           }\n//         }\n//         // • Question 1.1.\n//         if (!prodData.includes(item.prodID)) {\n//           prodData.push(item.prodID);\n//         }\n//         // • Question 1.3.\n//         if (item.magID && mag) {\n//           if (!magData.includes(item.magID)) {\n//             magData.push(item.magID);\n//           }\n//           // if (Number(item.catID) === category) {\n//           //   if (!fabData.includes(item.fabID)) {\n//           //     // Questin 1.1\n//           //     fabData.push(item.fabID);\n//           //   } else {\n//           //     // • Question 1.2.\n//           //     if (!prodByFab.includes(item.prodID)) {\n//           //       prodByFab.push(item.prodID);\n//           //     }\n//           //   }\n//           //   // • Question 1.1.\n//           //   if (!prodData.includes(item.prodID)) {\n//           //     prodData.push(item.prodID);\n//           //   }\n//           //   // • Question 1.3.\n//           //   if (item.magID && mag) {\n//           //     if (!magData.includes(item.magID)) {\n//           //       magData.push(item.magID);\n//           //     }\n//           // else {\n//           //   if (topMagasin[item.magID]) {\n//           //     let dataF = topMagasin[item.magID].fab;\n//           //     let dataP = topMagasin[item.magID].prod;\n//           //     if (!dataF.includes(item.fabID)) {\n//           //       dataF.push(item.fabID);\n//           //     }\n//           //     if (!dataP.includes(item.prodID)) {\n//           //       dataP.push(item.prodID);\n//           //     }\n//           //     topMagasin[item.magID] = { fab: dataF, prod: dataP };\n//           //   } else {\n//           //     topMagasin[item.magID] = {\n//           //       fab: [item.fabID],\n//           //       prod: [item.prodID],\n//           //     };\n//           //   }\n//           // }\n//         }\n//       }\n//     });\n//     setNombreFab(fabData.length);\n//     setNombreProd(prodData.length);\n//     setNombreMag(magData.length);\n//     // setMoyenneProduit(\n//     //   Math.round((prodByFab.length / fabData.length) * 100) / 100\n//     // );\n//     // if (mag) {\n//     //   // FOR question 3\n\n//     //   // Sorted top magasion\n//     //   const toFabMagasin = Object.keys(topMagasin).map((item) => {\n//     //     const lenF = topMagasin[item].fab.length;\n//     //     const obj = {};\n//     //     obj[item] = lenF;\n//     //     return obj;\n//     //   });\n\n//     //   const toProdMagasin = Object.keys(topMagasin).map((item) => {\n//     //     const lenP = topMagasin[item].prod.length;\n//     //     const obj = {};\n//     //     obj[item] = lenP;\n//     //     return obj;\n//     //   });\n\n//     //   const fabSorted = toFabMagasin.sort((a, b) => {\n//     //     return Number(Object.values(b).pop()) - Number(Object.values(a).pop());\n//     //   });\n//     //   // await sleep(100);\n//     //   const prodSorted = toProdMagasin.sort(\n//     //     (a, b) =>\n//     //       Number(Object.values(b).pop()) - Number(Object.values(a).pop())\n//     //   );\n\n//     //   topMagasinByFab = fabSorted.slice(0, 10);\n//     //   topMagasinByProd = prodSorted.slice(0, 10);\n//     //   setTopFab(topMagasinByFab);\n//     // Question 1.4\n//     // Pose fabID = 506, catID = 5, magasin top 10\n\n//     // handleFab(checkFabID.value, category, topMagasinByFab, topMagasinByProd);\n//     // }\n//   };\n\n//   return (\n//     <>\n//       <div className=\"tabs\">\n//         {optionTabs.map((item) => (\n//           <div key={item} className=\"tab\">\n//             {item}\n//           </div>\n//         ))}\n//       </div>\n//       <div className=\"box-container\">\n//         <div className=\"small-box\">\n//           <h1>Nombre de fabricants</h1>\n//           <p>{nombreFab}</p>\n//         </div>\n\n//         <div className=\"small-box\">\n//           <h1>Nombre de produits</h1>\n//           <p>{nombreProd}</p>\n//         </div>\n\n//         <div className=\"small-box\">\n//           <h1>Nombre de magasins</h1>\n//           <p>{nombreMag}</p>\n//         </div>\n//       </div>\n//       <h3>Moyenne</h3>\n//       <div className=\"box-container\">\n//         <div className=\"small-box\">\n//           <h1>Moyenne de produits par fabricants</h1>\n//           <p>{moyenneProduit}</p>\n//         </div>\n//       </div>\n//       {/* <div>\n//         <h3>Top 10 magasins</h3>\n//         <div class=\"box-container\">\n//           <BarChart data={topFab} />\n//         </div>\n//       </div> */}\n//     </>\n//   );\n// }\n\n// export default Health;","map":{"version":3,"names":[],"sources":["/Users/user/Desktop/etl/my-app/src/component/Health.js"],"sourcesContent":["// import { React, useRef, useState, useEffect } from 'react';\n// import '../asset/health.scss';\n// import * as d3 from 'd3';\n// import BarChart from './BarChart';\n// function Health({ catID, data, mag, annee }) {\n//   const [nombreFab, setNombreFab] = useState(0);\n//   const [nombreProd, setNombreProd] = useState(0);\n//   const [nombreMag, setNombreMag] = useState(0);\n//   const [moyenneProduit, setMoyenneProduit] = useState(0);\n//   const [topFab, setTopFab] = useState([]);\n//   const svgRef = useRef(null);\n//   const fabData = [];\n//   const prodData = [];\n//   const magData = [];\n//   const prodByFab = [];\n\n//   const dateString = [\n//     'Janvier 2022',\n//     'Février 2022',\n//     'Mars 2022',\n//     'Avril 2022',\n//     'Mai 2022',\n//     'Juin 2022',\n//     'Juillet 2022',\n//     'Août 2022',\n//     'Septembre 2022',\n//     'Octobre 2022',\n//     'Novembre 2022',\n//     'Decembre 2022',\n//     'Janvier 2023',\n//   ];\n//   const optionTabs = ['Statistiques', 'Top 10 magasins', 'Moyenne de produit'];\n//   const currentTab = 'Statistiques';\n\n//   useEffect(() => {\n//     handleData(5);\n//   }, []);\n\n//   const handleData = (category) => {\n//     let topMagasin = [];\n//     let topMagasinByFab = [];\n//     let topMagasinByProd = [];\n\n//     data.forEach((item) => {\n//       if (Number(item.catID) === category) {\n//         if (!fabData.includes(item.fabID)) {\n//           // Questin 1.1\n//           fabData.push(item.fabID);\n//         } else {\n//           // • Question 1.2.\n//           if (!prodByFab.includes(item.prodID)) {\n//             prodByFab.push(item.prodID);\n//           }\n//         }\n//         // • Question 1.1.\n//         if (!prodData.includes(item.prodID)) {\n//           prodData.push(item.prodID);\n//         }\n//         // • Question 1.3.\n//         if (item.magID && mag) {\n//           if (!magData.includes(item.magID)) {\n//             magData.push(item.magID);\n//           }\n//           // if (Number(item.catID) === category) {\n//           //   if (!fabData.includes(item.fabID)) {\n//           //     // Questin 1.1\n//           //     fabData.push(item.fabID);\n//           //   } else {\n//           //     // • Question 1.2.\n//           //     if (!prodByFab.includes(item.prodID)) {\n//           //       prodByFab.push(item.prodID);\n//           //     }\n//           //   }\n//           //   // • Question 1.1.\n//           //   if (!prodData.includes(item.prodID)) {\n//           //     prodData.push(item.prodID);\n//           //   }\n//           //   // • Question 1.3.\n//           //   if (item.magID && mag) {\n//           //     if (!magData.includes(item.magID)) {\n//           //       magData.push(item.magID);\n//           //     }\n//           // else {\n//           //   if (topMagasin[item.magID]) {\n//           //     let dataF = topMagasin[item.magID].fab;\n//           //     let dataP = topMagasin[item.magID].prod;\n//           //     if (!dataF.includes(item.fabID)) {\n//           //       dataF.push(item.fabID);\n//           //     }\n//           //     if (!dataP.includes(item.prodID)) {\n//           //       dataP.push(item.prodID);\n//           //     }\n//           //     topMagasin[item.magID] = { fab: dataF, prod: dataP };\n//           //   } else {\n//           //     topMagasin[item.magID] = {\n//           //       fab: [item.fabID],\n//           //       prod: [item.prodID],\n//           //     };\n//           //   }\n//           // }\n//         }\n//       }\n//     });\n//     setNombreFab(fabData.length);\n//     setNombreProd(prodData.length);\n//     setNombreMag(magData.length);\n//     // setMoyenneProduit(\n//     //   Math.round((prodByFab.length / fabData.length) * 100) / 100\n//     // );\n//     // if (mag) {\n//     //   // FOR question 3\n\n//     //   // Sorted top magasion\n//     //   const toFabMagasin = Object.keys(topMagasin).map((item) => {\n//     //     const lenF = topMagasin[item].fab.length;\n//     //     const obj = {};\n//     //     obj[item] = lenF;\n//     //     return obj;\n//     //   });\n\n//     //   const toProdMagasin = Object.keys(topMagasin).map((item) => {\n//     //     const lenP = topMagasin[item].prod.length;\n//     //     const obj = {};\n//     //     obj[item] = lenP;\n//     //     return obj;\n//     //   });\n\n//     //   const fabSorted = toFabMagasin.sort((a, b) => {\n//     //     return Number(Object.values(b).pop()) - Number(Object.values(a).pop());\n//     //   });\n//     //   // await sleep(100);\n//     //   const prodSorted = toProdMagasin.sort(\n//     //     (a, b) =>\n//     //       Number(Object.values(b).pop()) - Number(Object.values(a).pop())\n//     //   );\n\n//     //   topMagasinByFab = fabSorted.slice(0, 10);\n//     //   topMagasinByProd = prodSorted.slice(0, 10);\n//     //   setTopFab(topMagasinByFab);\n//     // Question 1.4\n//     // Pose fabID = 506, catID = 5, magasin top 10\n\n//     // handleFab(checkFabID.value, category, topMagasinByFab, topMagasinByProd);\n//     // }\n//   };\n\n//   return (\n//     <>\n//       <div className=\"tabs\">\n//         {optionTabs.map((item) => (\n//           <div key={item} className=\"tab\">\n//             {item}\n//           </div>\n//         ))}\n//       </div>\n//       <div className=\"box-container\">\n//         <div className=\"small-box\">\n//           <h1>Nombre de fabricants</h1>\n//           <p>{nombreFab}</p>\n//         </div>\n\n//         <div className=\"small-box\">\n//           <h1>Nombre de produits</h1>\n//           <p>{nombreProd}</p>\n//         </div>\n\n//         <div className=\"small-box\">\n//           <h1>Nombre de magasins</h1>\n//           <p>{nombreMag}</p>\n//         </div>\n//       </div>\n//       <h3>Moyenne</h3>\n//       <div className=\"box-container\">\n//         <div className=\"small-box\">\n//           <h1>Moyenne de produits par fabricants</h1>\n//           <p>{moyenneProduit}</p>\n//         </div>\n//       </div>\n//       {/* <div>\n//         <h3>Top 10 magasins</h3>\n//         <div class=\"box-container\">\n//           <BarChart data={topFab} />\n//         </div>\n//       </div> */}\n//     </>\n//   );\n// }\n\n// export default Health;\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA"},"metadata":{},"sourceType":"module","externalDependencies":[]}